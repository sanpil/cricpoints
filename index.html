<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèè 16-Over Cricket Points Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-content {
            padding: 30px;
        }

        .form-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 5px solid #4CAF50;
        }

        .form-section h3 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
        }

        .form-section h3::before {
            content: "üìã";
            margin-right: 10px;
            font-size: 1.2em;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        label {
            font-weight: 600;
            color: #555;
            margin-bottom: 5px;
            font-size: 0.95em;
        }

        input, select {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #4CAF50;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .radio-option input[type="radio"] {
            width: auto;
        }

        .calculate-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            display: block;
            margin: 30px auto;
            min-width: 200px;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .calculate-btn:active {
            transform: translateY(0);
        }

        .results {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 30px;
            margin-top: 30px;
            display: none;
        }

        .results h2 {
            text-align: center;
            font-size: 2em;
            margin-bottom: 25px;
        }

        .match-summary {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .team-card {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .team-card.winner {
            background: rgba(76, 175, 80, 0.3);
            border: 2px solid rgba(76, 175, 80, 0.5);
        }

        .team-card.loser {
            background: rgba(255, 193, 7, 0.3);
            border: 2px solid rgba(255, 193, 7, 0.5);
        }

        .team-card h3 {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .points {
            font-size: 3em;
            font-weight: bold;
            margin: 10px 0;
        }

        .breakdown {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .breakdown h3 {
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .breakdown-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            padding: 5px 0;
        }

        .breakdown-item.total {
            border-top: 2px solid rgba(255,255,255,0.3);
            margin-top: 10px;
            padding-top: 10px;
            font-weight: bold;
        }

        .error {
            background: #f44336;
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            display: none;
        }

        .reset-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .reset-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .rules-section {
            background: #e3f2fd;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
            border-left: 5px solid #2196F3;
        }

        .rules-section h3 {
            color: #1976D2;
            margin-bottom: 15px;
        }

        .rules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .rule-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #2196F3;
        }

        .rule-card h4 {
            color: #1976D2;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .match-summary {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .main-content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèè 16-Over Cricket Points Calculator</h1>
            <p>Calculate points based on official scoring system</p>
            <p><strong>‚úÖ FIXED: Corrected batting points logic!</strong></p>
        </div>

        <div class="main-content">
            <form id="cricketForm">
                <div class="form-section">
                    <h3>Team Information</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="team1">Team 1 Name:</label>
                            <input type="text" id="team1" value="Team 1" required>
                        </div>
                        <div class="form-group">
                            <label for="team2">Team 2 Name:</label>
                            <input type="text" id="team2" value="Team 2" required>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Match Result</h3>
                    <div class="form-group">
                        <label>Match Winner:</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="team1-wins" name="winner" value="team1" required>
                                <label for="team1-wins">Team 1 Wins</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="team2-wins" name="winner" value="team2" required>
                                <label for="team2-wins">Team 2 Wins</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="tie" name="winner" value="tie" required>
                                <label for="tie">Tie</label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-section" id="match-details">
                    <h3>Match Details</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="team1-runs">Team 1 Total Runs:</label>
                            <input type="number" id="team1-runs" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="team1-overs">Team 1 Overs Faced:</label>
                            <input type="number" id="team1-overs" min="0" max="16" step="0.1" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="team2-runs">Team 2 Total Runs:</label>
                            <input type="number" id="team2-runs" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="team2-overs">Team 2 Overs Faced:</label>
                            <input type="number" id="team2-overs" min="0" max="16" step="0.1" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="batting-first">Who Batted First:</label>
                            <select id="batting-first" required>
                                <option value="">Select team...</option>
                                <option value="team1">Team 1</option>
                                <option value="team2">Team 2</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="wickets">Wickets by Losing Team:</label>
                            <input type="number" id="wickets" min="0" max="10" required>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="players">Players in Losing Team:</label>
                            <input type="number" id="players" min="1" max="11" value="11">
                        </div>
                        <div class="form-group" id="all-out-group" style="display: none;">
                            <label>All Out (Special Case):</label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="all-out-yes" name="allOut" value="yes">
                                    <label for="all-out-yes">Yes</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="all-out-no" name="allOut" value="no">
                                    <label for="all-out-no">No</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="error" id="error-message"></div>

                <button type="submit" class="calculate-btn">üèÜ Calculate Points</button>
            </form>

            <div class="results" id="results">
                <h2>üèÜ Match Results & Points Breakdown</h2>
                <div class="match-summary" id="match-summary"></div>
                <div class="breakdown" id="breakdown"></div>
                <button type="button" class="reset-btn" onclick="resetCalculator()">üîÑ Calculate Another Match</button>
            </div>

            <div class="rules-section">
                <h3>üìã Points System Rules</h3>
                <div class="rules-grid">
                    <div class="rule-card">
                        <h4>üèÜ Basic Points</h4>
                        <p><strong>Total per match:</strong> 30 points</p>
                        <p><strong>Winner:</strong> 20 + leftover bonus</p>
                        <p><strong>Loser:</strong> Max 10 bonus points</p>
                        <p><strong>Tie:</strong> 15 points each</p>
                    </div>
                    <div class="rule-card">
                        <h4>üèè Batting Points (Loser)</h4>
                        <p><strong>Batted First:</strong> Based on run rate %</p>
                        <p><strong>Batted Second:</strong> Based on score %</p>
                        <p>5pts: >90% | 4pts: >80% | 3pts: >70%</p>
                        <p>2pts: >60% | 1pt: >50% | 0pts: ‚â§50%</p>
                    </div>
                    <div class="rule-card">
                        <h4>üé≥ Bowling Points</h4>
                        <p>5pts: 7+ wickets | 4pts: 6 wickets</p>
                        <p>3pts: 5 wickets | 2pts: 3 wickets</p>
                        <p>1pt: 1 wicket | 0pts: 0 wickets</p>
                        <p><strong>Special:</strong> All out <8 players = 5pts</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        class CricketCalculator {
            constructor() {
                this.setupEventListeners();
            }

            setupEventListeners() {
                document.getElementById('cricketForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.calculatePoints();
                });

                // Show/hide match details based on tie selection
                document.querySelectorAll('input[name="winner"]').forEach(radio => {
                    radio.addEventListener('change', () => {
                        const matchDetails = document.getElementById('match-details');
                        if (radio.value === 'tie') {
                            matchDetails.style.display = 'none';
                        } else {
                            matchDetails.style.display = 'block';
                        }
                    });
                });

                // Show/hide all-out option based on player count
                document.getElementById('players').addEventListener('input', (e) => {
                    const allOutGroup = document.getElementById('all-out-group');
                    if (parseInt(e.target.value) < 8) {
                        allOutGroup.style.display = 'block';
                    } else {
                        allOutGroup.style.display = 'none';
                    }
                });

                // Update team names in batting order dropdown
                document.getElementById('team1').addEventListener('input', this.updateTeamNames);
                document.getElementById('team2').addEventListener('input', this.updateTeamNames);
            }

            updateTeamNames() {
                const team1Name = document.getElementById('team1').value || 'Team 1';
                const team2Name = document.getElementById('team2').value || 'Team 2';
                const battingFirst = document.getElementById('batting-first');
                
                battingFirst.innerHTML = `
                    <option value="">Select team...</option>
                    <option value="team1">${team1Name}</option>
                    <option value="team2">${team2Name}</option>
                `;

                // Update radio button labels
                document.querySelector('label[for="team1-wins"]').textContent = `${team1Name} Wins`;
                document.querySelector('label[for="team2-wins"]').textContent = `${team2Name} Wins`;
            }

            calculateRunRate(runs, overs) {
                return overs === 0 ? 0 : runs / overs;
            }

            calculateBattingPoints(loserRuns, winnerRuns, loserOvers, winnerOvers, loserBattedFirst) {
                if (loserBattedFirst) {
                    // Batting first: based on run rate comparison
                    const winnerRunRate = this.calculateRunRate(winnerRuns, winnerOvers);
                    const loserRunRate = this.calculateRunRate(loserRuns, loserOvers);
                    
                    if (winnerRunRate === 0) return 0;
                    
                    const percentage = (loserRunRate / winnerRunRate) * 100;
                    
                    if (percentage > 90) return 5;
                    if (percentage > 80) return 4;
                    if (percentage > 70) return 3;
                    if (percentage > 60) return 2;
                    if (percentage > 50) return 1;
                    return 0;
                } else {
                    // Batting second: based on score comparison
                    const percentage = (loserRuns / winnerRuns) * 100;
                    
                    if (percentage > 90) return 5;
                    if (percentage > 80) return 4;
                    if (percentage > 70) return 3;
                    if (percentage > 60) return 2;
                    if (percentage > 50) return 1;
                    return 0;
                }
            }

            calculateBowlingPoints(wickets, specialCase = false) {
                if (specialCase) return 5;
                
                if (wickets >= 7) return 5;
                if (wickets >= 6) return 4;
                if (wickets >= 5) return 3;
                if (wickets >= 3) return 2;
                if (wickets >= 1) return 1;
                return 0;
            }

            showError(message) {
                const errorDiv = document.getElementById('error-message');
                errorDiv.textContent = message;
                errorDiv.style.display = 'block';
                setTimeout(() => {
                    errorDiv.style.display = 'none';
                }, 5000);
            }

            calculatePoints() {
                try {
                    // Get form values
                    const team1Name = document.getElementById('team1').value;
                    const team2Name = document.getElementById('team2').value;
                    const winner = document.querySelector('input[name="winner"]:checked')?.value;

                    if (!winner) {
                        this.showError('Please select match winner or tie');
                        return;
                    }

                    // Handle tie case
                    if (winner === 'tie') {
                        this.displayTieResults(team1Name, team2Name);
                        return;
                    }

                    // Get match details
                    const team1Runs = parseInt(document.getElementById('team1-runs').value);
                    const team1Overs = parseFloat(document.getElementById('team1-overs').value);
                    const team2Runs = parseInt(document.getElementById('team2-runs').value);
                    const team2Overs = parseFloat(document.getElementById('team2-overs').value);
                    const battingFirst = document.getElementById('batting-first').value;
                    const wickets = parseInt(document.getElementById('wickets').value);
                    const players = parseInt(document.getElementById('players').value);
                    const allOut = document.querySelector('input[name="allOut"]:checked')?.value === 'yes';

                    // Validate inputs
                    if (isNaN(team1Runs) || isNaN(team1Overs) || isNaN(team2Runs) || isNaN(team2Overs) || !battingFirst || isNaN(wickets)) {
                        this.showError('Please fill in all required fields');
                        return;
                    }

                    // Determine winner and loser
                    let winnerName, loserName, winnerRuns, winnerOvers, loserRuns, loserOvers;
                    
                    if (winner === 'team1') {
                        winnerName = team1Name;
                        loserName = team2Name;
                        winnerRuns = team1Runs;
                        winnerOvers = team1Overs;
                        loserRuns = team2Runs;
                        loserOvers = team2Overs;
                    } else {
                        winnerName = team2Name;
                        loserName = team1Name;
                        winnerRuns = team2Runs;
                        winnerOvers = team2Overs;
                        loserRuns = team1Runs;
                        loserOvers = team1Overs;
                    }

                    const loserBattedFirst = (battingFirst === 'team1' && winner === 'team2') || 
                                           (battingFirst === 'team2' && winner === 'team1');

                    const specialCase = players < 8 && allOut;

                    // Calculate points
                    const battingPoints = this.calculateBattingPoints(loserRuns, winnerRuns, loserOvers, winnerOvers, loserBattedFirst);
                    const bowlingPoints = this.calculateBowlingPoints(wickets, specialCase);
                    const loserBonus = Math.min(battingPoints + bowlingPoints, 10);
                    const loserPoints = loserBonus;
                    const winnerPoints = 20 + (10 - loserBonus);

                    // Display results
                    this.displayResults({
                        winnerName,
                        loserName,
                        winnerPoints,
                        loserPoints,
                        winnerRuns,
                        winnerOvers,
                        loserRuns,
                        loserOvers,
                        battingPoints,
                        bowlingPoints,
                        loserBonus,
                        loserBattedFirst,
                        wickets,
                        specialCase
                    });

                } catch (error) {
                    this.showError('Error calculating points. Please check your inputs.');
                    console.error(error);
                }
            }

            displayTieResults(team1Name, team2Name) {
                const matchSummary = document.getElementById('match-summary');
                const breakdown = document.getElementById('breakdown');

                matchSummary.innerHTML = `
                    <div class="team-card">
                        <h3>ü§ù ${team1Name}</h3>
                        <div class="points">15</div>
                        <p>TIE</p>
                    </div>
                    <div class="team-card">
                        <h3>ü§ù ${team2Name}</h3>
                        <div class="points">15</div>
                        <p>TIE</p>
                    </div>
                `;

                breakdown.innerHTML = `
                    <h3>üí° Tie Rule Explanation</h3>
                    <p>In case of a tie, both teams receive 15 points each with no bonus points awarded.</p>
                    <div class="breakdown-item total">
                        <span>Total Points Distributed:</span>
                        <span>30/30 ‚úì</span>
                    </div>
                `;

                document.getElementById('results').style.display = 'block';
                document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
            }

            displayResults(data) {
                const matchSummary = document.getElementById('match-summary');
                const breakdown = document.getElementById('breakdown');

                // Calculate run rates
                const winnerRR = this.calculateRunRate(data.winnerRuns, data.winnerOvers);
                const loserRR = this.calculateRunRate(data.loserRuns, data.loserOvers);

                matchSummary.innerHTML = `
                    <div class="team-card winner">
                        <h3>üèÜ ${data.winnerName}</h3>
                        <div class="points">${data.winnerPoints}</div>
                        <p>WINNER</p>
                        <p>${data.winnerRuns} runs (${data.winnerOvers} overs)</p>
                        <p>Run Rate: ${winnerRR.toFixed(2)}</p>
                    </div>
                    <div class="team-card loser">
                        <h3>üòî ${data.loserName}</h3>
                        <div class="points">${data.loserPoints}</div>
                        <p>BONUS POINTS</p>
                        <p>${data.loserRuns} runs (${data.loserOvers} overs)</p>
                        <p>Run Rate: ${loserRR.toFixed(2)}</p>
                    </div>
                `;

                // Calculate percentage for explanation
                let percentage;
                let calculationMethod;
                if (data.loserBattedFirst) {
                    percentage = (loserRR / winnerRR) * 100;
                    calculationMethod = `Run Rate Comparison (${data.loserName} batted first)`;
                } else {
                    percentage = (data.loserRuns / data.winnerRuns) * 100;
                    calculationMethod = `Score Comparison (${data.loserName} batted second)`;
                }

                breakdown.innerHTML = `
                    <h3>üéØ Points Breakdown</h3>
                    <div class="breakdown-item">
                        <span>Base winning points:</span>
                        <span>20</span>
                    </div>
                    <div class="breakdown-item">
                        <span>Maximum bonus available:</span>
                        <span>10</span>
                    </div>
                    <div class="breakdown-item">
                        <span><strong>${data.loserName} Bonus Points:</strong></span>
                        <span></span>
                    </div>
                    <div class="breakdown-item">
                        <span>‚Ä¢ Batting points (${percentage.toFixed(1)}%):</span>
                        <span>${data.battingPoints}</span>
                    </div>
                    <div class="breakdown-item">
                        <span>‚Ä¢ Bowling points (${data.wickets} wickets${data.specialCase ? ', special case' : ''}):</span>
                        <span>${data.bowlingPoints}</span>
                    </div>
                    <div class="breakdown-item">
                        <span>‚Ä¢ Total bonus (max 10):</span>
                        <span>${data.loserBonus}</span>
                    </div>
                    <div class="breakdown-item total">
                        <span><strong>Final Points:</strong></span>
                        <span></span>
                    </div>
                    <div class="breakdown-item">
                        <span>${data.winnerName}: 20 + (10 - ${data.loserBonus})</span>
                        <span>${data.winnerPoints}</span>
                    </div>
                    <div class="breakdown-item">
                        <span>${data.loserName}:</span>
                        <span>${data.loserPoints}</span>
                    </div>
                    <div class="breakdown-item total">
                        <span>Total Distributed:</span>
                        <span>${data.winnerPoints + data.loserPoints}/30 ‚úì</span>
                    </div>
                    <div style="margin-top: 20px; padding-top: 15px; border-top: 2px solid rgba(255,255,255,0.3);">
                        <h4>üí° Calculation Method:</h4>
                        <p>${calculationMethod}</p>
                        ${data.specialCase ? '<p><strong>‚ö° Special Case:</strong> All out with less than 8 players - maximum bowling points awarded!</p>' : ''}
                    </div>
                `;

                document.getElementById('results').style.display = 'block';
                document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Initialize calculator
        const calculator = new CricketCalculator();

        // Reset function
        function resetCalculator() {
            document.getElementById('cricketForm').reset();
            document.getElementById('results').style.display = 'none';
            document.getElementById('match-details').style.display = 'block';
            document.getElementById('all-out-group').style.display = 'none';
            calculator.updateTeamNames();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Initialize team names on load
        document.addEventListener('DOMContentLoaded', () => {
            calculator.updateTeamNames();
        });
    </script>
</body>
</html>